import{wait as g,isPlainObject as h,isFunction as v}from"@vuepress/helper/client";import{watchImmediate as i}from"@vueuse/core";import{onMounted as w,toValue as m,isRef as l,watch as k,inject as W,computed as f,ref as _}from"vue";import{useRoutePath as b,useSiteLocaleData as P,withBase as S,usePageFrontmatter as j}from"vuepress/client";import{Watermark as y}from"watermark-js-plus";const C=(t,e,n=500)=>{const a=b(),d=P();w(()=>{const s=new y,u=c=>{const o={content:d.value.title,fontColor:"#76747f",globalAlpha:c.mode==="blind"?.005:.165,...c};o.image?.startsWith("/")&&(o.image=S(o.image)),m(e)&&s.changeOptions(o)};i([e,a],async()=>{e.value?(await g(n),u(m(t))):s.destroy()},{flush:"post"}),l(t)&&k(t,u)})},p=Symbol(__VUEPRESS_DEV__?"watermark":""),r=_({}),E=t=>{l(t)?i(t,e=>{r.value=e}):v(t)?i(f(t),e=>{r.value=e}):r.value=t},O=t=>{const e=W(p),n=j();return f(()=>{const{watermark:a}=n.value;return{...m(t),...e.value,...h(a)?a:{}}})},R=t=>{t.provide(p,r)};export{E as defineWatermarkConfig,R as injectWatermarkConfig,C as setupWatermark,O as useWatermarkOptions};
//# sourceMappingURL=index.js.map
